<!DOCTYPE html>
<html lang="en">
<head>
	<title>Particle Designer</title>
</head>
<body>
	<canvas id="canvas" width="400" height="400" />

	<script type="text/javascript" src="javascripts/underscore-min.js"></script>
	<script type="text/javascript" src="javascripts/particlesystem/util.js"></script>
	<script type="text/javascript" src="javascripts/particlesystem/Particle.js"></script>
	<script type="text/javascript" src="javascripts/particlesystem/Emitter.js"></script>
	<script type="text/javascript" src="javascripts/particlesystem/Renderer.js"></script>
	<script type="text/javascript">
		var lastTimestamp = 0;
		var particleSystem = new pjs.Emitter({
			totalParticles: 500,
			emissionRate: 50,
			pos: { x: 200, y: 200 },
			angle: 0,
			angleVar: 360,
			speed: 20,
			speedVar: 10,
			life: 7,
			lifeVar: 4,
			radialAccel: -20,
			radialAccelVar: 0,
			tangentialAccel: 15,
			tangentialAccelVar: 0,
			radius: 10,
			radiusVar: 4,
			startColor: [1, 0.5, 0, 0.8],
			endColor: [0, 0, 0, 0],
			active: true,
			duration: Infinity
		});

		var context = document.getElementById('canvas').getContext('2d');
		function draw(timestamp) {
			var delta = timestamp - (lastTimestamp || timestamp);
			lastTimestamp = timestamp;

			delta /= 1000;
			particleSystem.update(delta);

			context.fillStyle = 'black';
			context.fillRect(0, 0, context.canvas.width, context.canvas.height);

			pjs.Renderer.render(context, particleSystem.particles);
			
			webkitRequestAnimationFrame(draw);
		}

		draw(new Date().getTime());
	</script>
</body>
</html>

